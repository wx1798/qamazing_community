(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0133c28e"],{"072a":function(t,e,a){},"11ca":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"kline",attrs:{id:"kline"}})},n=[],r=(a("445a"),a("1f70"),a("d0bf"),a("646f")),s=a.n(r),o=a("4c09"),h=a("0e4d"),u=a("94ef"),c={buy:"",sell:""},l=function(){function t(e){Object(h["a"])(this,t),this.data=e,this.type=e.type}return Object(u["a"])(t,[{key:"judge",value:function(){switch(this.type){case"dot":return this.drawDot();case"text":return this.drawText();case"line":return this.drawLine();case"polygon":return this.drawPolygon()}}},{key:"drawDot",value:function(){var t=this.data.data;for(var e in t)t[e].Symbol=c[t[e].Symbol];var a={name:"MULTI_SVGICON",type:1,Draw:{DrawType:"MULTI_SVGICON",DrawData:{Family:"qa",Icon:t}}};return a}},{key:"drawText",value:function(){var t={name:"MULTI_TEXT",type:1,Draw:{DrawType:"MULTI_TEXT",DrawData:this.data.data}};return t}},{key:"drawLine",value:function(){var t={name:"MULTI_LINE",type:1,Draw:{DrawType:"MULTI_LINE",DrawData:[]}};for(var e in this.data.data)t.Draw.DrawData.push(this.data.data[e]);return t}},{key:"drawPolygon",value:function(){var t=this.data.data;for(var e in t)t[e].Point=[].concat(Object(o["a"])(t[e].Point),[t[e].Point[0]]);var a={name:"MULTI_LINE",type:1,Draw:{DrawType:"MULTI_LINE",DrawData:[]}};for(var i in t)a.Draw.DrawData.push(t[i]);return a}}]),t}(),d=(a("3407"),a("cbe2"),{props:["chartSize"],data:function(){return{hold_gap:"",jumpTime:"",URL:"",klineData:[],isRequest:!0,QAindex:"",frequence:"",Symbol:"600000.sh",KLine:{JSChart:null,Option:{Type:"历史K线图",Windows:[{Index:"成交打点",API:{Name:"成交打点",Script:null,Args:null}},{Index:"MA"},{Index:"VOL"}],OverlayIndex:[],IsShowCorssCursorInfo:!0,Border:{Left:1,Right:1,Top:25,Bottom:25},IsShowRightMenu:!0,KLine:{DragMode:1,Right:1,Period:0,MaxReqeustDataCount:1e3,MaxRequestMinuteDayCount:10,PageSize:50,IsShowTooltip:!0,DrawType:0,KLineDoubleClick:!1,RightSpaceCount:5,ZoomType:1},ExtendChart:[{Name:"KLineTooltip"},{Name:"背景图",FrameID:0}],NetworkFilter:this.networkFilter}}}},mounted:function(){},methods:{OnSize:function(t,e){var a="",i="";t?(a=e,i=t):(a=this.chartSize.height,i=this.chartSize.width);var n=this.$refs.kline;n.style.width=i+"px",n.style.height=a+"px",this.KLine.JSChart&&this.KLine.JSChart.OnSize()},CreateKLineChart:function(){if(!this.KLine.JSChart){this.KLine.Option.Symbol=this.Symbol;var t=s.a.Chart.JSChart.GetResource();t.KLine.Info.IconLibrary={Family:"qa",Icon:[{Text:"",HScreenText:"",Color:"#f39f7c"},{Text:"",HScreenText:"",Color:"#19b1b7"}]};var e=s.a.Chart.JSChart.Init(this.$refs.kline);e.SetOption(this.KLine.Option),this.KLine.JSChart=e}},networkFilter:function(t,e){var a=this;switch(t.PreventDefault=!0,this.isRequest&&(this.$api.getKlineData(this.URL).then((function(t){var i=t.result;a.klineData=i.kline.data,e(i.kline)})),this.isRequest=!1),t.Name){case"APIScriptIndex::ExecuteScript":this.APIScriptIndex(t,e);break;case"AnnouncementInfo::RequestData":break}},APIScriptIndex:function(t,e){var a=t.Request,i=t.HQChart,n=i.ChartPaint[0].Data;if("成交打点"===a.Data.indexname){var r=JSON.parse(sessionStorage.getItem("draw")),s=this.getBGChartPaint(),o=[];for(var h in r)"area"!==r[h].type?o.push(new l(r[h]).judge()):s&&(s.Data=r[h].data);var u={code:0,stock:{name:i.Name,symbol:i.Symbol},outdata:{date:n.GetDate(),outvar:[].concat(o)}};t.PreventDefault=!0,e(u)}this.changeFirstShowDate()},AnnouncementInfo:function(t,e){t.PreventDefault=!0;var a=[{releasedate:20200305,title:"20200305扩展类型公告1",typeex:[0]},{releasedate:20200323,title:"20200323扩展类型公告2",typeex:[1]}];setTimeout((function(){var t={report:a,code:0};e(t)}),200)},recreate:function(){this.isRequest=!0,this.KLine.JSChart&&(this.KLine.JSChart.StopAutoUpdate(),this.KLine.JSChart=null),this.clearDivDOM(),this.OnSize(),this.CreateKLineChart()},clearDivDOM:function(){while(this.$refs.kline.hasChildNodes())this.$refs.kline.removeChild(this.$refs.kline.lastChild)},getBGChartPaint:function(){for(var t in this.KLine.JSChart.JSChartContainer.ExtendChartPaint){var e=this.KLine.JSChart.JSChartContainer.ExtendChartPaint[t];if("BackgroundPaint"===e.ClassName)return e}return null},setPageSize:function(){var t=JSON.parse(sessionStorage.getItem("draw")),e=Number(t[0].data[0].Date),a=Number(t[0].data[0].Time),i=Number(t[0].data[1].Date),n=Number(t[0].data[1].Time),r=this.klineData.findIndex((function(t){return t[0]===e&&t[8]===a})),s=this.klineData.findIndex((function(t){return t[0]===i&&t[8]===n})),o=Math.abs(s-r),h=r-25<1?1:r-25,u=this.klineData[h][0],c=this.klineData[h][8];return o=o<50?50:o,{PageSize:o,jumpDate:u,jumpTime:c}},changeFirstShowDate:function(){if(this.KLine.JSChart){var t=this.setPageSize(),e=t.PageSize,a=t.jumpDate,i=t.jumpTime;this.KLine.JSChart.SetFirstShowDate({Date:a,Time:i,PageSize:e+50})}}}}),f=d,D=(a("95bc"),a("eb25"),a("5d22")),S=Object(D["a"])(f,i,n,!1,null,"e946e77c",null);e["default"]=S.exports},"35e0":function(t,e,a){},"95bc":function(t,e,a){"use strict";a("072a")},eb25:function(t,e,a){"use strict";a("35e0")}}]);