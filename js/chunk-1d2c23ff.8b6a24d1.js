(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d2c23ff","chunk-792a7ae8"],{"12f8":function(e,t,i){},"1f12":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("d2-container",{attrs:{type:"full"}},[n("div",{ref:"boxSize",staticClass:"kline-experiment"},[n("div",{ref:"klineCard",staticClass:"kline-chart card"},[e.watermark?n("div",{staticClass:"watermark"},[n("img",{attrs:{src:i("2f98"),alt:"",width:"300",height:"300"}})]):e._e(),e.klineFlag?n("kline-chart",{ref:"kline",attrs:{chartSize:e.chartSize}}):e._e()],1),n("div",{staticClass:"config card"},[n("p",[e._v("配置")]),n("el-form",{attrs:{"label-width":"70px"}},[n("el-form-item",{attrs:{label:"地址"}},[n("el-input",{attrs:{placeholder:"请输入ip地址"},model:{value:e.formLabelAlign.ip,callback:function(t){e.$set(e.formLabelAlign,"ip","string"===typeof t?t.trim():t)},expression:"formLabelAlign.ip"}})],1),n("el-form-item",{attrs:{label:"路由"}},[n("el-input",{attrs:{placeholder:"请输入路由"},model:{value:e.formLabelAlign.port,callback:function(t){e.$set(e.formLabelAlign,"port","string"===typeof t?t.trim():t)},expression:"formLabelAlign.port"}})],1),n("el-form-item",{attrs:{label:"类型"}},[n("el-select",{attrs:{placeholder:"请选择market"},model:{value:e.formLabelAlign.market,callback:function(t){e.$set(e.formLabelAlign,"market","string"===typeof t?t.trim():t)},expression:"formLabelAlign.market"}},e._l(e.options,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"代码"}},[n("el-input",{attrs:{placeholder:"请输入股票代码"},model:{value:e.formLabelAlign.code,callback:function(t){e.$set(e.formLabelAlign,"code","string"===typeof t?t.trim():t)},expression:"formLabelAlign.code"}})],1),n("el-form-item",{attrs:{label:"频率"}},[n("el-select",{attrs:{placeholder:"请选择频率"},model:{value:e.formLabelAlign.frequence,callback:function(t){e.$set(e.formLabelAlign,"frequence","string"===typeof t?t.trim():t)},expression:"formLabelAlign.frequence"}},e._l(e.frequenceOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"开始时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"请输入开始时间"},model:{value:e.formLabelAlign.start,callback:function(t){e.$set(e.formLabelAlign,"start",t)},expression:"formLabelAlign.start"}})],1),n("el-form-item",{attrs:{label:"结束时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"请输入结束时间"},model:{value:e.formLabelAlign.end,callback:function(t){e.$set(e.formLabelAlign,"end",t)},expression:"formLabelAlign.end"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"danger"},on:{click:e.confirm}},[e._v("确认")])],1),n("el-form-item",{attrs:{label:"跳转日期"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"请输入需要跳转的日期"},model:{value:e.jumpTime,callback:function(t){e.jumpTime=t},expression:"jumpTime"}})],1),n("el-form-item",[n("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"success"},on:{click:e.jump}},[e._v("跳转日期")])],1)],1)],1)])])},a=[],r=i("48e7"),l=i("6e85"),o=i.n(l),s={name:"kline",data:function(){return{klineFlag:!1,watermark:!1,chartSize:{},jumpTime:new Date,formLabelAlign:{ip:"http://127.0.0.1:8029",port:"/testk",code:"000001",frequence:"day",start:"2021-01-04",end:new Date,market:"stock_cn",raw:!0},options:[{value:"stock_cn",label:"股票"},{value:"future_cn",label:"期货"}],frequenceOptions:[{value:"1min",label:"1min"},{value:"5min",label:"5min"},{value:"15min",label:"15min"},{value:"30min",label:"30min"},{value:"60min",label:"60min"},{value:"day",label:"day"}]}},components:{klineChart:r["default"]},mounted:function(){this.setKlineChartSize(),this.monitor()},methods:{monitor:function(){var e=this;this.$erd.listenTo(this.$refs.boxSize,(function(t){var i=t.offsetWidth-375,n=t.offsetHeight-10;e.$refs.kline.OnSize(i,n)}))},setKlineChartSize:function(){var e=this;this.$nextTick((function(){e.chartSize.width=e.$refs.klineCard.offsetWidth-10,e.chartSize.height=e.$refs.klineCard.offsetHeight-10,e.klineFlag=!0}))},confirm:function(){var e=this.formLabelAlign.ip+this.formLabelAlign.port+"?code="+this.formLabelAlign.code;if(""!==this.formLabelAlign.frequence&&(e=e+"&frequence="+this.formLabelAlign.frequence),""!==this.formLabelAlign.start&&(e=e+"&start="+o()(this.formLabelAlign.start).format("YYYY-MM-DD")),""!==this.formLabelAlign.end&&(e=e+"&end="+o()(this.formLabelAlign.end).format("YYYY-MM-DD")),""!==this.formLabelAlign.market&&(e=e+"&market="+this.formLabelAlign.market),""!==this.formLabelAlign.raw&&(e=e+"&raw="+this.formLabelAlign.raw),!1===this.formLabelAlign.raw)switch(this.formLabelAlign.frequence){case"day":this.$refs.kline.KLine.Option.KLine.Period=0;break;case"60min":this.$refs.kline.KLine.Option.KLine.Period=8;break;case"30min":this.$refs.kline.KLine.Option.KLine.Period=7;break;case"15min":this.$refs.kline.KLine.Option.KLine.Period=6;break;case"5min":this.$refs.kline.KLine.Option.KLine.Period=5;break;case"1min":this.$refs.kline.KLine.Option.KLine.Period=4;break}else"day"===this.formLabelAlign.frequence?this.$refs.kline.KLine.Option.KLine.Period=0:this.$refs.kline.KLine.Option.KLine.Period=4;this.watermark=!0,this.$refs.kline.raw=this.formLabelAlign.raw,this.$refs.kline.URL=e,this.$refs.kline.recreate()},jump:function(){var e=o()(this.jumpTime).format("YYYYMMDD");this.$refs.kline.changeFirstShowDate(e)}}},f=s,c=(i("9f25"),i("935e"),i("5d22")),h=Object(c["a"])(f,n,a,!1,null,"3c7a3c22",null);t["default"]=h.exports},"2f98":function(e,t,i){e.exports=i.p+"img/QUANTAXIS_LOGO.37038f88.png"},"48e7":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"kline",attrs:{id:"kline"}})},a=[],r=(i("6a61"),i("2e91")),l=i("646f"),o=i.n(l),s=(i("3407"),i("cbe2"),{props:["chartSize"],data:function(){return{hold_gap:"",jumpTime:"",URL:"",klineData:[],QAindex:"",frequence:"",Symbol:"600000.sh",KLine:{JSChart:null,Option:{Type:"历史K线图",Windows:[{Index:"MA"},{Index:"VOL"}],OverlayIndex:[],IsShowCorssCursorInfo:!0,Border:{Left:1,Right:1,Top:25,Bottom:25},IsShowRightMenu:!0,KLine:{DragMode:1,Right:1,Period:0,MaxReqeustDataCount:1e3,MaxRequestMinuteDayCount:10,PageSize:50,IsShowTooltip:!0,DrawType:0,KLineDoubleClick:!1,RightSpaceCount:5,ZoomType:1},ExtendChart:[{Name:"KLineTooltip"},{Name:"背景图",FrameID:0}],NetworkFilter:this.networkFilter}}}},mounted:function(){},methods:{OnSize:function(e,t){var i="",n="";e?(i=t,n=e):(i=this.chartSize.height,n=this.chartSize.width);var a=this.$refs.kline;a.style.width=n+"px",a.style.height=i+"px",this.KLine.JSChart&&this.KLine.JSChart.OnSize()},CreateKLineChart:function(){if(!this.KLine.JSChart){this.KLine.Option.Symbol=this.Symbol;var e=o.a.Chart.JSChart.Init(this.$refs.kline);e.SetOption(this.KLine.Option),this.KLine.JSChart=e}},networkFilter:function(e,t){switch(e.PreventDefault=!0,e.Name){case"KLineChartContainer::RequestHistoryData":this.getData(e,t);break;case"KLineChartContainer::ReqeustHistoryMinuteData":this.getData(e,t);break}},getData:function(e,t){var i=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.$api.getKlineData(i.URL);case 2:n=e.sent,a=n.result,i.klineData=a.kline.data,t(a.kline);case 6:case"end":return e.stop()}}),e)})))()},recreate:function(){this.KLine.JSChart&&(this.KLine.JSChart.StopAutoUpdate(),this.KLine.JSChart=null),this.clearDivDOM(),this.OnSize(),this.CreateKLineChart()},clearDivDOM:function(){while(this.$refs.kline.hasChildNodes())this.$refs.kline.removeChild(this.$refs.kline.lastChild)},getBGChartPaint:function(){for(var e in this.KLine.JSChart.JSChartContainer.ExtendChartPaint){var t=this.KLine.JSChart.JSChartContainer.ExtendChartPaint[e];if("BackgroundPaint"===t.ClassName)return t}return null},changeFirstShowDate:function(e){this.KLine.JSChart&&this.KLine.JSChart.SetFirstShowDate({Date:e,PageSize:50})}}}),f=s,c=(i("fc43"),i("a18d"),i("5d22")),h=Object(c["a"])(f,n,a,!1,null,"6a48aa3e",null);t["default"]=h.exports},"653a":function(e,t,i){},"935e":function(e,t,i){"use strict";i("653a")},"9f25":function(e,t,i){"use strict";i("12f8")},a18d:function(e,t,i){"use strict";i("e4b4")},e4b4:function(e,t,i){},f8b5:function(e,t,i){},fc43:function(e,t,i){"use strict";i("f8b5")}}]);